\documentclass[a4paper]{article}
% generated by Docutils <https://docutils.sourceforge.io/>
\usepackage{cmap} % fix search and cut-and-paste in Acrobat
\usepackage{ifthen}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{alltt}
\usepackage{textcomp} % text symbol macros

%%% Custom LaTeX preamble
% PDF Standard Fonts
\usepackage{mathptmx} % Times
\usepackage[scaled=.90]{helvet}
\usepackage{courier}

%%% User specified packages and stylesheets
\makeatletter
\makeatletter
\makeatother

\makeatother
\makeatletter
\makeatletter
\makeatother

\makeatother


%%% Fallback definitions for Docutils-specific commands

% hyperlinks:
\ifthenelse{\isundefined{\hypersetup}}{
  \usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
  \usepackage{bookmark}
  \urlstyle{same} % normal text font (alternatives: tt, rm, sf)
}{}
\hypersetup{
  pdftitle={Stylesheets and Pygments stylesheets},
}

%%% Body
\begin{document}
\title{Stylesheets and Pygments stylesheets%
  \label{stylesheets-and-pygments-stylesheets}}
\author{}
\date{}
\maketitle

To compile:

\begin{quote}
\begin{alltt}
$ DOCUTILSCONFIG=tests/stylesheets.docutils.conf \textbackslash{}
    alectryon stylesheets.v -{}-pygments-style emacs -o - \textbackslash{}
    | sed -r '/^ *<style type="text.css">/,/^ *<.style>/ \{ /^ *<style |<.style>/b; d\}' \textbackslash{}
    > stylesheets.html
  # reST → HTML; produces ‘stylesheets.html’

$ DOCUTILSCONFIG=tests/stylesheets.docutils.conf \textbackslash{}
    alectryon stylesheets.v -{}-pygments-style emacs -{}-backend latex -o - \textbackslash{}
    | sed -r '/^% embedded stylesheet/,/^\textbackslash{}\textbackslash{}makeatother/ \{ /^\textbackslash{}\textbackslash{}makeat/b; d\}' \textbackslash{}
    > stylesheets.part.tex
  # reST → LaTeX; produces ‘stylesheets.part.tex’
\end{alltt}
\end{quote}

\begin{alectryon}
  \begin{\al{sentence}}
    \begin{\al{input}}
      \PY{k+kn}{Print}~Nat\PY{o}{.}add\PY{o}{.}
    \end{\al{input}}
    \Al{sep}
    \begin{\al{output}}
      \begin{\al{messages}}
        \begin{\al{message}}
          Nat\PY{o}{.}add~\PY{o}{=}\Al{nl}
          \PY{k}{fix}~add~\PY{o}{(}n~m~\PY{o}{:}~nat\PY{o}{)}~\PY{o}{\PYZob{}}\PY{k}{struct}~n\PY{o}{\PYZcb{}}~\PY{o}{:}~nat~\PY{o}{:=}\Al{nl}
          ~~\PY{k}{match}~n~\PY{k}{with}\Al{nl}
          ~~\PY{o}{|}~\PY{l+m+mi}{0}~\PY{o}{=\PYZgt{}}~m\Al{nl}
          ~~\PY{o}{|}~S~p~\PY{o}{=\PYZgt{}}~S~\PY{o}{(}add~p~m\PY{o}{)}\Al{nl}
          ~~\PY{k}{end}\Al{nl}
          ~~~~~\PY{o}{:}~nat~\PY{o}{\PYZhy{}\PYZgt{}}~nat~\PY{o}{\PYZhy{}\PYZgt{}}~nat\Al{nl}
          \Al{nl}
          \PY{k+kn}{Arguments}~Nat\PY{o}{.}add~\PY{o}{(}n~m\PY{o}{)\PYZpc{}}nat\PYZus{}scope
        \end{\al{message}}
      \end{\al{messages}}
    \end{\al{output}}
  \end{\al{sentence}}
\end{alectryon}

\end{document}

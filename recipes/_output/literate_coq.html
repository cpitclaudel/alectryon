<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>Literate programming with Alectryon (Coq input)</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="literate-programming-with-alectryon-coq-input">
<h1 class="title">Literate programming with Alectryon (Coq input)</h1>

<p>Alectryon supports literate programs and documents (combinations of code and prose) written in Coq and reStructuredText.  Here is an example, written in Coq.  It can be converted to reST, HTML, or LaTeX using the following commands:</p>
<pre class="literal-block">
alectryon literate_coq.v
    # Coq+reST → HTML;  produces ‘literate_coq.html’
$ DOCUTILSCONFIG=literate.docutils.conf alectryon \
  literate_coq.v --backend latex
    # Coq+reST → LaTeX; produces ‘literate_coq.tex’
alectryon literate_coq.v --backend rst
    # Coq+reST → reST;  produces ‘literate_coq.v.rst’

$ cd ..; python -m alectryon.literate \
    recipes/literate_coq.v &gt; recipes/literate_coq.min.rst
  # Minimal Coq → reST; produces ‘literate_coq.min.rst’
$ cd ..; python -m alectryon.literate --coq2rst - \
    &lt; recipes/literate_coq.v &gt; recipes/literate_coq.min.stdin.rst
  # Minimal Coq → reST; produces ‘literate_coq.min.stdin.rst’
</pre>
<hr class="docutils" />
<p>Here's an <em>inductive specification</em> of evenness:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Inductive</span> <span class="nf">Even</span> : nat -&gt; <span class="kt">Prop</span> :=
| EvenO : Even O
| EvenS : <span class="kr">forall</span> <span class="nv">n</span>, Even n -&gt; Even (S (S n)).</span></span></pre><p>… and a corresponding decision procedure:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Fixpoint</span> <span class="nf">even</span> (<span class="nv">n</span>: nat): bool :=
  <span class="kr">match</span> n <span class="kr">with</span>
  | <span class="mi">0</span> =&gt; true
  | <span class="mi">1</span> =&gt; false
  | S (S n) =&gt; even n
  <span class="kr">end</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-txt">
<span class="c">(* Ensure that we never unfold [even (S n)] *)</span>
</span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Arguments</span> even : <span class="nb">simpl</span> nomatch.</span></span></pre><p>Can we prove it correct?</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk0"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, even n = true &lt;-&gt; Even n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk1"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat, even n = true &lt;-&gt; Even n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk2"><span class="nb">induction</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk3" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even n = true &lt;-&gt; Even n</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk3"><hr></label><div class="goal-conclusion">even (S n) = true &lt;-&gt; Even (S n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk4"><span class="kp">all</span>: <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true &lt;-&gt; Even <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk5" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even n = true &lt;-&gt; Even n</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk5"><hr></label><div class="goal-conclusion">even (S n) = true &lt;-&gt; Even (S n)</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk6">- <span class="c">(* n ← 0 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true &lt;-&gt; Even <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk7"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true -&gt; Even <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Even <span class="mi">0</span> -&gt; true = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">all</span>: <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk8">- <span class="c">(* n ← S _ *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even n = true &lt;-&gt; Even n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even (S n) = true &lt;-&gt; Even (S n)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk9" style="display: none" type="checkbox"><label class="alectryon-input alectryon-failed" for="literate-coq-v-chk9"><span class="nb">apply</span> IHn. <span class="c">(* stuck! *)</span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">In environment
n : nat
IHn : even n = true &lt;-&gt; Even n
Unable to <span class="nb">unify</span> <span class="s2">&quot;even n = true &lt;-&gt; Even n&quot;</span> <span class="kr">with</span>
 <span class="s2">&quot;even (S n) = true &lt;-&gt; Even (S n)&quot;</span>.</blockquote></div></div></small></span></pre><p>The induction hypothesis doesn't apply — maybe we need to destruct <tt class="docutils literal">n</tt>?</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chka"><span class="nb">destruct</span> n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chkb" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even (S n) = true &lt;-&gt; Even (S n)</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chkb"><hr></label><div class="goal-conclusion">even (S (S n)) = true &lt;-&gt; Even (S (S n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chkc">+ <span class="c">(* n ← 1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even <span class="mi">0</span> = true &lt;-&gt; Even <span class="mi">0</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even <span class="mi">1</span> = true &lt;-&gt; Even <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">      </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chkd">+ <span class="c">(* n ← S (S _) *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>even (S n) = true &lt;-&gt; Even (S n)</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even (S (S n)) = true &lt;-&gt; Even (S (S n))</div></blockquote></div></div></small></span></pre><p>Stuck again!</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Abort</span>.</span></span></pre><div class="section" id="strengthening-the-spec">
<h1>Strengthening the spec</h1>
<p>The usual approach is to strengthen the spec to work around the weakness of the inductive principle.</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chke"><span class="kn">Lemma</span> <span class="nf">even_Even</span> :
  <span class="kr">forall</span> <span class="nv">n</span>, (even n = true &lt;-&gt; Even n) /\
       (even (S n) = true &lt;-&gt; Even (S n)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chkf" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chkf"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">n</span> : nat,
(even n = true &lt;-&gt; Even n) /\
(even (S n) = true &lt;-&gt; Even (S n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk10"><span class="nb">induction</span> n; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk11" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk11"><hr></label><div class="goal-conclusion">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk12" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk12">- <span class="c">(* n ← 0 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">(true = true &lt;-&gt; Even <span class="mi">0</span>) /\ (false = true &lt;-&gt; Even <span class="mi">1</span>)</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk13" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk13"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true -&gt; Even <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">false = true -&gt; Even <span class="mi">1</span></div></blockquote><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Even <span class="mi">1</span> -&gt; false = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk14" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk14"><span class="kp">all</span>: <span class="kp">try</span> <span class="nb">constructor</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">false = true -&gt; Even <span class="mi">1</span></div></blockquote><div class="alectryon-extra-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion">Even <span class="mi">1</span> -&gt; false = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">all</span>: <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk15" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk15">- <span class="c">(* n ← S _ *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHn</var><span class="hyp-type"><b>: </b><span>(even n = true &lt;-&gt; Even n) /\ (even (S n) = true &lt;-&gt; Even (S n))</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk16" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk16"><span class="nb">destruct</span> IHn <span class="kr">as</span> ((Hne &amp; HnE) &amp; (HSne &amp; HSnE)).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">(even (S n) = true &lt;-&gt; Even (S n)) /\
(even n = true &lt;-&gt; Even (S (S n)))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk17" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk17"><span class="kp">repeat</span> <span class="nb">split</span>; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even (S n) = true -&gt; Even (S n)</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk18" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk18"><hr></label><div class="goal-conclusion">Even (S n) -&gt; even (S n) = true</div></blockquote><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk19" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk19"><hr></label><div class="goal-conclusion">even n = true -&gt; Even (S (S n))</div></blockquote><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk1a" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk1a"><hr></label><div class="goal-conclusion">Even (S (S n)) -&gt; even n = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk1b" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk1b"><span class="kp">all</span>: <span class="nb">eauto using</span> EvenS.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hne</var><span class="hyp-type"><b>: </b><span>even n = true -&gt; Even n</span></span></span><br><span><var>HnE</var><span class="hyp-type"><b>: </b><span>Even n -&gt; even n = true</span></span></span><br><span><var>HSne</var><span class="hyp-type"><b>: </b><span>even (S n) = true -&gt; Even (S n)</span></span></span><br><span><var>HSnE</var><span class="hyp-type"><b>: </b><span>Even (S n) -&gt; even (S n) = true</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Even (S (S n)) -&gt; even n = true</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">eauto</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre></div>
<div class="section" id="writing-a-fixpoint">
<h1>Writing a fixpoint</h1>
<p>But writing a fixpoint (either with the <code class="highlight coq"><span class="kn">Fixpoint</span></code> command or with the <code class="highlight coq"><span class="kr">fix</span></code> tactic) is much nicer:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chk1c" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk1c"><span class="kn">Fixpoint</span> <span class="nf">even_Even_fp</span> (<span class="nv">n</span>: nat):
  even n = true &lt;-&gt; Even n.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even n = true &lt;-&gt; Even n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-coq-v-chk1d" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk1d"><span class="kn">Proof</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even n = true &lt;-&gt; Even n</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk1e" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk1e"><span class="nb">destruct</span> n <span class="kr">as</span> [ | [ | n ] ]; <span class="nb">cbn</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true &lt;-&gt; Even <span class="mi">0</span></div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk1f" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk1f"><hr></label><div class="goal-conclusion">false = true &lt;-&gt; Even <span class="mi">1</span></div></blockquote><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk20" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk20"><hr></label><div class="goal-conclusion">even n = true &lt;-&gt; Even (S (S n))</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk21" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk21">- <span class="c">(* n ← 0 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">true = true &lt;-&gt; Even <span class="mi">0</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kp">repeat</span> <span class="nb">constructor</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk22" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk22">- <span class="c">(* n ← 1 *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">false = true &lt;-&gt; Even <span class="mi">1</span></div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">split</span>; <span class="nb">inversion</span> <span class="mi">1</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk23" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk23">- <span class="c">(* n ← S (S _) *)</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even n = true &lt;-&gt; Even (S (S n))</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk24" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk24"><span class="nb">split</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even n = true -&gt; Even (S (S n))</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-coq-v-chk25" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><label class="goal-separator" for="literate-coq-v-chk25"><hr></label><div class="goal-conclusion">Even (S (S n)) -&gt; even n = true</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk26" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk26">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">even n = true -&gt; Even (S (S n))</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">constructor</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-coq-v-chk27" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-coq-v-chk27">+</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>even_Even_fp</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">n</span> : nat,
even n = true &lt;-&gt; Even n</span></span></span><br><span><var>n</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">Even (S (S n)) -&gt; even n = true</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">apply</span> even_Even_fp; <span class="bp">assumption</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span></span></pre><p>Alectryon defined a <tt class="docutils literal">:coqid:</tt> role to link to definitions in Coqdoc-generated documentation; for example:</p>
<blockquote>
Note that the standard library already contains a <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">boolean</a> <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">predicate</a> for <code class="highlight coq"><span class="n">even</span></code> (called <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">Coq.Init.Nat.even</a>, or <a class="reference external" href="https://coq.inria.fr/library/Coq.Init.Nat.html#even">even</a> for short), as well as an <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">inductive one</a> (called <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">Nat.Even</a> in module <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#">Coq.Arith.PeanoNat</a>).</blockquote>
<p>If you have your own documentation, you can use a custom role to point to your own URL:</p>
<p>With this definition, for example, you can write <a class="mq reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">Nat.Even</a> instead of <a class="reference external" href="https://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.Even">Nat.Even</a>.</p>
</div>
</div>
</div></body>
</html>

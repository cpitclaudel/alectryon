<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>Literate programming with Alectryon (reST input)</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Coq+SerAPI. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus. On Mac, use <kbd>‚åò</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="literate-programming-with-alectryon-rest-input">
<h1 class="title">Literate programming with Alectryon (reST input)</h1>

<p>Alectryon supports literate programs and documents (combinations of code and prose) written in Coq and reStructuredText.  Here is an example, written in reST.  It can be converted to Coq, HTML, or LaTeX using the following commands:</p>
<pre class="literal-block">
alectryon literate_reST.rst
    # reST+Coq ‚Üí HTML;  produces ‚Äòliterate_reST.html‚Äô
$ DOCUTILSCONFIG=literate.docutils.conf alectryon \
  literate_reST.rst --backend latex
    # reST+Coq ‚Üí LaTeX; produces ‚Äòliterate_reST.tex‚Äô
alectryon literate_reST.rst --backend coq
    # reST+Coq ‚Üí Coq;   produces ‚Äòliterate_reST.v‚Äô

$ cd ..; python -m alectryon.literate \
    recipes/literate_reST.rst &gt; recipes/literate_reST.min.v
  # Minimal reST ‚Üí Coq; produces ‚Äòliterate_reST.min.v‚Äô
$ cd ..; python -m alectryon.literate --rst2coq - \
    &lt; recipes/literate_reST.rst &gt; recipes/literate_reST.min.stdin.v
  # Minimal reST ‚Üí Coq; produces ‚Äòliterate_reST.min.stdin.v‚Äô
</pre>
<hr class="docutils" />
<p>Coq fragments are introduced with <tt class="docutils literal">.. coq::</tt>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-rest-rst-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk0"><span class="kn">Lemma</span> <span class="nf">le_l</span> : <span class="kr">forall</span> <span class="nv">y</span> <span class="nv">x</span>, S x &lt;= y -&gt; x &lt;= y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">y</span> <span class="nv">x</span> : nat, S x &lt;= y -&gt; x &lt;= y</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-rest-rst-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk1"><span class="nb">induction</span> y; <span class="nb">inversion</span> <span class="mi">1</span>; <span class="nb">subst</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : nat, S x &lt;= y -&gt; x &lt;= y</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S y &lt;= S y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">y &lt;= S y</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-rest-rst-chk2" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> : nat, S x &lt;= y -&gt; x &lt;= y</span></span></span><br><span><var>x</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>S x &lt;= S y</span></span></span><br><span><var>H1</var><span class="hyp-type"><b>: </b><span>S x &lt;= y</span></span></span><br></div><label class="goal-separator" for="literate-rest-rst-chk2"><hr></label><div class="goal-conclusion">x &lt;= S y</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-rest-rst-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk3"><span class="kp">all</span>: <span class="nb">info_eauto</span>.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="c">(* info eauto: *)</span></blockquote><blockquote class="alectryon-message"><span class="nb">simple apply</span> le_S.</blockquote><blockquote class="alectryon-message"><span class="nb">simple apply</span> le_n.</blockquote><blockquote class="alectryon-message"><span class="c">(* info eauto: *)</span></blockquote><blockquote class="alectryon-message"><span class="nb">simple apply</span> le_S.</blockquote><blockquote class="alectryon-message"><span class="nb">simple apply</span> IHy.</blockquote><blockquote class="alectryon-message"><span class="bp">exact</span> H1.</blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="kn">Qed</span>.</span><span class="alectryon-wsp">
</span></span><span class="alectryon-txt">
</span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-rest-rst-chk4" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk4"><span class="kn">Goal</span> <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span>, x &lt;= y &lt;= z -&gt; x &lt;= z.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</div></blockquote></div></div></small></span></pre><p>They can be nested nested into other reST directives, such as tables:</p>
<table border="1" class="docutils" style="width: 90%">
<caption>Coq commands</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Coq command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><div class="first last"><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk5"><span class="nb">intros</span> x y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</div></blockquote></div></div></small></span></pre></div></td>
<td>Move the variables <code class="highlight coq"><span class="n">x</span></code> and <code class="highlight coq"><span class="n">y</span></code> into the context.</td>
</tr>
<tr><td><div class="first last"><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chk6" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk6"><span class="nb">revert</span> x; <span class="nb">induction</span> y.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= <span class="mi">0</span> &lt;= z -&gt; x &lt;= z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-rest-rst-chk7" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</span></span></span><br></div><label class="goal-separator" for="literate-rest-rst-chk7"><hr></label><div class="goal-conclusion"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= S y &lt;= z -&gt; x &lt;= z</div></blockquote></div></div></div></small></span></pre></div></td>
<td>Perform induction on <code class="highlight coq"><span class="n">y</span></code>, generalizing <code class="highlight coq"><span class="n">x</span></code>.</td>
</tr>
<tr><td><div class="first last"><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chk8"><span class="kp">all</span>: <span class="nb">intros</span> x z (Hl &amp; Hr).</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>x &lt;= <span class="mi">0</span></span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;= z</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-rest-rst-chk9" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</span></span></span><br><span><var>x, z</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>x &lt;= S y</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>S y &lt;= z</span></span></span><br></div><label class="goal-separator" for="literate-rest-rst-chk9"><hr></label><div class="goal-conclusion">x &lt;= z</div></blockquote></div></div></div></small></span></pre></div></td>
<td>Move conjunction into the context, splitting it into <code class="highlight coq"><span class="n">Hl</span></code> and <code class="highlight coq"><span class="n">Hr</span></code>.</td>
</tr>
<tr><td><div class="first last"><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chka" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chka">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>x, z</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>x &lt;= <span class="mi">0</span></span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span><span class="mi">0</span> &lt;= z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;= z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><span class="alectryon-input"><span class="nb">inversion</span> Hl; <span class="bp">assumption</span>.</span></span></pre></div></td>
<td>Solve base case; <code class="highlight coq"><span class="nb">inversion</span></code> changes <code class="highlight coq"><span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">0</span></code> into <code class="highlight coq"><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span></code>.</td>
</tr>
<tr><td><div class="first last"><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chkb">-</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</span></span></span><br><span><var>x, z</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>x &lt;= S y</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>S y &lt;= z</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;= z</div></blockquote></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chkc"><span class="nb">inversion</span> Hl; <span class="nb">subst</span>; <span class="kp">try</span> <span class="bp">congruence</span>.</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>y</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>IHy</var><span class="hyp-type"><b>: </b><span><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">z</span> : nat, x &lt;= y &lt;= z -&gt; x &lt;= z</span></span></span><br><span><var>x, z</var><span class="hyp-type"><b>: </b><span>nat</span></span></span><br><span><var>Hl</var><span class="hyp-type"><b>: </b><span>x &lt;= S y</span></span></span><br><span><var>Hr</var><span class="hyp-type"><b>: </b><span>S y &lt;= z</span></span></span><br><span><var>H0</var><span class="hyp-type"><b>: </b><span>x &lt;= y</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">x &lt;= z</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-rest-rst-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-rest-rst-chkd"><span class="nb">apply</span> IHy; <span class="nb">split</span>; <span class="nb">info_eauto using</span> le_l.</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="c">(* info eauto: *)</span></blockquote><blockquote class="alectryon-message"><span class="bp">exact</span> H0.</blockquote><blockquote class="alectryon-message"><span class="c">(* info eauto: *)</span></blockquote><blockquote class="alectryon-message"><span class="nb">simple apply</span> le_l.</blockquote><blockquote class="alectryon-message"><span class="bp">exact</span> Hr.</blockquote></div></div></small></span></pre></div></td>
<td>Solve inductive case using the <code class="highlight coq"><span class="n">le_l</span></code> lemma.</td>
</tr>
</tbody>
</table>
</div>
</div></body>
</html>

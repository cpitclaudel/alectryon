\documentclass[a4paper]{article}
% generated by Docutils <https://docutils.sourceforge.io/>
\usepackage{cmap} % fix search and cut-and-paste in Acrobat
\usepackage{ifthen}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{alltt}
\usepackage{color}
\setcounter{secnumdepth}{0}
\usepackage{textcomp} % text symbol macros

%%% Custom LaTeX preamble

\usepackage[margin=1in]{geometry}

%%% User specified packages and stylesheets
\usepackage{alectryon}
\usepackage{pygments}

%%% Fallback definitions for Docutils-specific commands

% basic code highlight:
\providecommand*\DUrolecomment[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\providecommand*\DUroledeleted[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\providecommand*\DUrolekeyword[1]{\textbf{#1}}
\providecommand*\DUrolestring[1]{\textit{#1}}

% custom inline roles: \DUrole{#1}{#2} tries \DUrole#1{#2}
\providecommand*{\DUrole}[2]{%
  \ifcsname DUrole#1\endcsname%
    \csname DUrole#1\endcsname{#2}%
  \else%
    #2%
  \fi%
}

% transition (break / fancybreak / anonymous section)
\providecommand*{\DUtransition}{%
  \hspace*{\fill}\hrulefill\hspace*{\fill}
  \vskip 0.5\baselineskip
}

% hyperlinks:
\ifthenelse{\isundefined{\hypersetup}}{
  \usepackage[colorlinks=true,linkcolor=blue,urlcolor=blue]{hyperref}
  \usepackage{bookmark}
  \urlstyle{same} % normal text font (alternatives: tt, rm, sf)
}{}
\hypersetup{
  pdftitle={Literate programming with Alectryon (Coq input)},
}

%%% Body
\begin{document}
\title{Literate programming with Alectryon (Coq input)%
  \label{literate-programming-with-alectryon-coq-input}}
\author{}
\date{}
\maketitle

Alectryon supports literate programs and documents (combinations of code and prose) written in Coq and reStructuredText.  Here is an example, written in Coq.  It can be converted to reST, HTML, or LaTeX using the following commands:

\begin{quote}
\begin{alltt}
alectryon literate_coq.v
    # Coq+reST → HTML;  produces ‘literate_coq.html’
$ DOCUTILSCONFIG=literate.docutils.conf alectryon \textbackslash{}
  literate_coq.v -{}-backend latex
    # Coq+reST → LaTeX; produces ‘literate_coq.tex’
alectryon literate_coq.v -{}-backend rst
    # Coq+reST → reST;  produces ‘literate_coq.v.rst’

$ cd ..; python -m alectryon.literate \textbackslash{}
    recipes/literate_coq.v > recipes/literate_coq.min.rst
  # Minimal Coq → reST; produces ‘literate_coq.min.rst’
$ cd ..; python -m alectryon.literate -{}-coq2rst - \textbackslash{}
    < recipes/literate_coq.v > recipes/literate_coq.min.stdin.rst
  # Minimal Coq → reST; produces ‘literate_coq.min.stdin.rst’
\end{alltt}
\end{quote}

%___________________________________________________________________________
\DUtransition

Here's an \emph{inductive specification} of evenness:

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Inductive}~\PY{n+nf}{Even}~\PY{o}{:}~\PY{n}{nat}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{k+kt}{Prop}~\PY{o}{:=}\nl
      \PY{o}{|}~\PY{n}{EvenO}~\PY{o}{:}~\PY{n}{Even}~\PY{n}{O}\nl
      \PY{o}{|}~\PY{n}{EvenS}~\PY{o}{:}~\PY{k}{forall}~\PY{n+nv}{n}\PY{o}{,}~\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)).}
    \end{input}
  \end{sentence}
\end{alectryon}

… and a corresponding decision procedure:

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Fixpoint}~\PY{n+nf}{even}~\PY{o}{(}\PY{n+nv}{n}\PY{o}{:}~\PY{n}{nat}\PY{o}{):}~\PY{n}{bool}~\PY{o}{:=}\nl
      ~~\PY{k}{match}~\PY{n}{n}~\PY{k}{with}\nl
      ~~\PY{o}{|}~\PY{l+m+mi}{0}~\PY{o}{=\PYZgt{}}~\PY{n}{true}\nl
      ~~\PY{o}{|}~\PY{l+m+mi}{1}~\PY{o}{=\PYZgt{}}~\PY{n}{false}\nl
      ~~\PY{o}{|}~\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=\PYZgt{}}~\PY{n}{even}~\PY{n}{n}\nl
      ~~\PY{k}{end}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{txt}
    \nl
    \PY{c}{(*~Ensure~that~we~never~unfold~[even~(S~n)]~*)}\nl
  \end{txt}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Arguments}~\PY{n}{even}~\PY{o}{:}~\PY{n+nb}{simpl}~\PY{n}{nomatch}\PY{o}{.}
    \end{input}
  \end{sentence}
\end{alectryon}

Can we prove it correct?

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Lemma}~\PY{n+nf}{even\PYZus{}Even}~\PY{o}{:}\nl
      ~~\PY{k}{forall}~\PY{n+nv}{n}\PY{o}{,}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Proof}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{n+nb}{induction}~\PY{n}{n}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{l+m+mi}{0}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{IHn}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{k+kp}{all}\PY{o}{:}~\PY{n+nb}{cbn}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{IHn}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~0~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{split}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}\end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{l+m+mi}{0}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{true}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{all}\PY{o}{:}~\PY{n+nb}{constructor}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~S~\PYZus{}~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{IHn}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{apply}~\PY{n}{IHn}\PY{o}{.}~\PY{c}{(*~stuck!~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{messages}
        \begin{message}
          \PY{n}{In}~\PY{n}{environment}\nl
          \PY{n}{n}~\PY{o}{:}~\PY{n}{nat}\nl
          \PY{n}{IHn}~\PY{o}{:}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\nl
          \PY{n}{Unable}~\PY{n}{to}~\PY{n+nb}{unify}~\PY{l+s+s2}{\PYZdq{}even~n~=~true~\PYZlt{}\PYZhy{}\PYZgt{}~Even~n\PYZdq{}}~\PY{k}{with}\nl
          ~\PY{l+s+s2}{\PYZdq{}even~(S~n)~=~true~\PYZlt{}\PYZhy{}\PYZgt{}~Even~(S~n)\PYZdq{}}\PY{o}{.}
        \end{message}
      \end{messages}
    \end{output}
  \end{sentence}
\end{alectryon}

The induction hypothesis doesn't apply — maybe we need to destruct \texttt{n}?

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{destruct}~\PY{n}{n}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{IHn}{\PY{n}{even}~\PY{l+m+mi}{0}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{l+m+mi}{1}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{IHn}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{o}{+}~\PY{c}{(*~n~←~1~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{IHn}{\PY{n}{even}~\PY{l+m+mi}{0}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{l+m+mi}{1}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~~~\PY{n+nb}{split}\PY{o}{;}~\PY{n+nb}{inversion}~\PY{l+m+mi}{1}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{o}{+}~\PY{c}{(*~n~←~S~(S~\PYZus{})~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{IHn}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
\end{alectryon}

Stuck again!

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Abort}\PY{o}{.}
    \end{input}
  \end{sentence}
\end{alectryon}


\section{Strengthening the spec%
  \label{strengthening-the-spec}%
}

The usual approach is to strengthen the spec to work around the weakness of the inductive principle.

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Lemma}~\PY{n+nf}{even\PYZus{}Even}~\PY{o}{:}\nl
      ~~\PY{k}{forall}~\PY{n+nv}{n}\PY{o}{,}~\PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{)}~\PY{o}{/\PYZbs{}}\nl
      ~~~~~~~\PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)).}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{)}~\PY{o}{/\PYZbs{}}\nl
            \PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Proof}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{)}~\PY{o}{/\PYZbs{}}\nl
            \PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{n+nb}{induction}~\PY{n}{n}\PY{o}{;}~\PY{n+nb}{cbn}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{o}{(}\PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}\PY{o}{)}~\PY{o}{/\PYZbs{}}~\PY{o}{(}\PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}\PY{o}{)}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{IHn}{\PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{)}~\PY{o}{/\PYZbs{}}~\PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{/\PYZbs{}}\nl
              \PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)))}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~0~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{o}{(}\PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}\PY{o}{)}~\PY{o}{/\PYZbs{}}~\PY{o}{(}\PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}\PY{o}{)}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{repeat}~\PY{n+nb}{split}\PY{o}{;}~\PY{n+nb}{cbn}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}\end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
            \end{conclusion}
          \end{goal}
          \sep
          \begin{goal}
            \begin{hyps}\end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{l+m+mi}{1}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{false}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{all}\PY{o}{:}~\PY{k+kp}{try}~\PY{n+nb}{constructor}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}\end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}\end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{l+m+mi}{1}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{false}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{all}\PY{o}{:}~\PY{n+nb}{inversion}~\PY{l+m+mi}{1}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~S~\PYZus{}~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{IHn}{\PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{)}~\PY{o}{/\PYZbs{}}~\PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{/\PYZbs{}}\nl
            \PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{destruct}~\PY{n}{IHn}~\PY{k}{as}~\PY{o}{((}\PY{n}{Hne}~\PY{o}{\PYZam{}}~\PY{n}{HnE}\PY{o}{)}~\PY{o}{\PYZam{}}~\PY{o}{(}\PY{n}{HSne}~\PY{o}{\PYZam{}}~\PY{n}{HSnE}\PY{o}{)).}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
            \sep
            \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
            \sep
            \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{o}{(}\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{/\PYZbs{}}\nl
            \PY{o}{(}\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{repeat}~\PY{n+nb}{split}\PY{o}{;}~\PY{n+nb}{cbn}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
            \sep
            \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
            \sep
            \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
              \sep
              \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
              \sep
              \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
              \sep
              \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
          \sep
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
              \sep
              \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
              \sep
              \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
              \sep
              \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
            \end{conclusion}
          \end{goal}
          \sep
          \begin{goal}
            \begin{hyps}
              \hyp{n}{\PY{n}{nat}}
              \sep
              \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
              \sep
              \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
              \sep
              \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
              \sep
              \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{all}\PY{o}{:}~\PY{n+nb}{eauto~using}~\PY{n}{EvenS}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{n}{\PY{n}{nat}}
            \sep
            \hyp{Hne}{\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{HnE}{\PY{n}{Even}~\PY{n}{n}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}}
            \sep
            \hyp{HSne}{\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}}
            \sep
            \hyp{HSnE}{\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{)}~\PY{o}{=}~\PY{n}{true}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{inversion}~\PY{l+m+mi}{1}\PY{o}{;}~\PY{n+nb}{eauto}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Qed}\PY{o}{.}
    \end{input}
  \end{sentence}
\end{alectryon}


\section{Writing a fixpoint%
  \label{writing-a-fixpoint}%
}

But writing a fixpoint (either with the \texttt{\DUrole{code}{\DUrole{highlight}{\DUrole{coq}{\DUrole{kn}{Fixpoint}}}}} command or with the \texttt{\DUrole{code}{\DUrole{highlight}{\DUrole{coq}{\DUrole{k}{fix}}}}} tactic) is much nicer:

\begin{alectryon}
  % Generator: Alectryon
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Fixpoint}~\PY{n+nf}{even\PYZus{}Even\PYZus{}fp}~\PY{o}{(}\PY{n+nv}{n}\PY{o}{:}~\PY{n}{nat}\PY{o}{):}\nl
      ~~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Proof}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{n+nb}{destruct}~\PY{n}{n}~\PY{k}{as}~\PY{o}{[}~\PY{o}{|}~\PY{o}{[}~\PY{o}{|}~\PY{n}{n}~\PY{o}{]}~\PY{o}{];}~\PY{n+nb}{cbn}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
              \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
            \end{conclusion}
          \end{goal}
          \sep
          \begin{goal}
            \begin{hyps}
              \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
              \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
              \sep
              \hyp{n}{\PY{n}{nat}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~0~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{true}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{0}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{k+kp}{repeat}~\PY{n+nb}{constructor}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~1~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{false}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{l+m+mi}{1}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{split}\PY{o}{;}~\PY{n+nb}{inversion}~\PY{l+m+mi}{1}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~\PY{o}{\PYZhy{}}~\PY{c}{(*~n~←~S~(S~\PYZus{})~*)}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{n+nb}{split}\PY{o}{.}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
        \sep
        \begin{extragoals}
          \begin{goal}
            \begin{hyps}
              \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
              \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
              \sep
              \hyp{n}{\PY{n}{nat}}
            \end{hyps}
            \sep
            \infrule{}
            \sep
            \begin{conclusion}
              \PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}
            \end{conclusion}
          \end{goal}
        \end{extragoals}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{o}{+}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{n+nb}{constructor}\PY{o}{;}~\PY{n+nb}{apply}~\PY{n}{even\PYZus{}Even\PYZus{}fp}\PY{o}{;}~\PY{n+nb+bp}{assumption}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      ~~~~\PY{o}{+}
    \end{input}
    \sep
    \begin{output}
      \begin{goals}
        \begin{goal}
          \begin{hyps}
            \hyp{even\char`\_Even\char`\_fp}{\PY{k}{forall}~\PY{n+nv}{n}~\PY{o}{:}~\PY{n}{nat}\PY{o}{,}\nl
            \PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}~\PY{o}{\PYZlt{}\PYZhy{}\PYZgt{}}~\PY{n}{Even}~\PY{n}{n}}
            \sep
            \hyp{n}{\PY{n}{nat}}
          \end{hyps}
          \sep
          \infrule{}
          \sep
          \begin{conclusion}
            \PY{n}{Even}~\PY{o}{(}\PY{n}{S}~\PY{o}{(}\PY{n}{S}~\PY{n}{n}\PY{o}{))}~\PY{o}{\PYZhy{}\PYZgt{}}~\PY{n}{even}~\PY{n}{n}~\PY{o}{=}~\PY{n}{true}
          \end{conclusion}
        \end{goal}
      \end{goals}
    \end{output}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{n+nb}{inversion}~\PY{l+m+mi}{1}\PY{o}{;}~\PY{n+nb}{apply}~\PY{n}{even\PYZus{}Even\PYZus{}fp}\PY{o}{;}~\PY{n+nb+bp}{assumption}\PY{o}{.}\nl
    \end{input}
  \end{sentence}
  \sep
  \begin{sentence}
    \begin{input}
      \PY{k+kn}{Qed}\PY{o}{.}
    \end{input}
  \end{sentence}
\end{alectryon}

\setlength{\emergencystretch}{4em}

Alectryon defined a \texttt{:coqid:} role to link to definitions in Coqdoc-generated documentation; for example:

\begin{quote}
Note that the standard library already contains a \href{https://coq.inria.fr/library/Coq.Init.Nat.html\#even}{boolean} \href{https://coq.inria.fr/library/Coq.Init.Nat.html\#even}{predicate} for \texttt{\DUrole{code}{\DUrole{highlight}{\DUrole{coq}{\DUrole{n}{even}}}}} (called \href{https://coq.inria.fr/library/Coq.Init.Nat.html\#even}{Coq.Init.Nat.even}, or \href{https://coq.inria.fr/library/Coq.Init.Nat.html\#even}{even} for short), as well as an \href{https://coq.inria.fr/library/Coq.Arith.PeanoNat.html\#Nat.Even}{inductive one} (called \href{https://coq.inria.fr/library/Coq.Arith.PeanoNat.html\#Nat.Even}{Nat.Even} in module \href{https://coq.inria.fr/library/Coq.Arith.PeanoNat.html\#}{Coq.Arith.PeanoNat}).
\end{quote}

If you have your own documentation, you can use a custom role to point to your own URL:

With this definition, for example, you can write \href{https://coq.inria.fr/library/Coq.Arith.PeanoNat.html\#Nat.Even}{Nat.Even} instead of \href{https://coq.inria.fr/library/Coq.Arith.PeanoNat.html\#Nat.Even}{Nat.Even}.

\end{document}

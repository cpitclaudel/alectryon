<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" class="alectryon-standalone" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<title>Literate programming with Alectryon (Lean3 input)</title>
<link rel="stylesheet" href="alectryon.css" type="text/css" />
<link rel="stylesheet" href="docutils_basic.css" type="text/css" />
<link rel="stylesheet" href="pygments.css" type="text/css" />
<script type="text/javascript" src="alectryon.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/IBM-type/0.5.4/css/ibm-type.min.css" integrity="sha512-sky5cf9Ts6FY1kstGOBHSybfKqdHR41M0Ldb0BjNiv3ifltoQIsg0zIaQ+wwdwgQ0w9vKFW7Js50lxH9vqNSSw==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/firacode/5.2.0/fira_code.min.css" integrity="sha512-MbysAYimH1hH2xYzkkMHB6MqxBqfP0megxsCLknbYqHVwXTCg9IqHbk+ZP/vnhO8UEW6PaXAkKe2vQ+SWACxxA==" crossorigin="anonymous" />
<meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<div class="alectryon-root alectryon-centered"><div class="alectryon-banner">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running Lean3. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+↑</kbd> <kbd>Ctrl+↓</kbd> to navigate, <kbd>Ctrl+🖱️</kbd> to focus. On Mac, use <kbd>⌘</kbd> instead of <kbd>Ctrl</kbd>.</div><div class="document" id="literate-programming-with-alectryon-lean3-input">
<h1 class="title">Literate programming with Alectryon (Lean3 input)</h1>

<p>Alectryon supports literate programs and documents (combinations of code and prose) written in Lean3 and reStructuredText.  Here is an example written in Lean3.  It can be converted to reST, HTML, or LaTeX using the following commands:</p>
<pre class="literal-block">
alectryon --frontend lean3+rst literate_lean3.lean
    # Coq+reST → HTML;  produces ‘literate_lean3.html’
alectryon --frontend lean3+rst literate_lean3.lean --backend latex \
     --latex-dialect xelatex \
     -o literate_lean3.xe.tex
    # Coq+reST → LaTeX; produces ‘literate_lean3.xe.tex’
alectryon --frontend lean3+rst literate_lean3.lean --backend rst
    # Coq+reST → reST;  produces ‘literate_lean3.lean3.rst’
</pre>
<hr class="docutils" />
<div class="section" id="running-queries">
<h1>Running queries</h1>
<p>Alectryon captures the results of <code class="highlight lean3"><span class="k">#check</span></code>, <code class="highlight lean3"><span class="k">#eval</span></code>, and the like:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chk0" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk0"><span class="k">#reduce</span> <span class="k">let</span> x := <span class="mi">5</span> <span class="k">in</span> x <span class="bp">+</span> <span class="mi">3</span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">8</span></blockquote></div></div></small></span></pre><p>By default, these results are folded and are displayed upon hovering or clicking.  We can unfold them by default using annotations or directives:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-lean3-lean-chk1" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk1"><span class="k">#check</span> nat</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">ℕ : <span class="kt">Type</span></blockquote></div></div></small></span></pre><pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-lean3-lean-chk2" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk2"><span class="k">#check</span> bool</label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message">bool : <span class="kt">Type</span></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-lean3-lean-chk3" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk3"><span class="k">#eval</span> <span class="mi">1</span> <span class="bp">+</span> <span class="mi">1</span></label><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="mi">2</span></blockquote></div></div></small></span></pre><p>Other flags can be used to control display, like <tt class="docutils literal"><span class="pre">.no-in</span></tt>:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-lean3-lean-chk4" style="display: none" type="checkbox"><small class="alectryon-output"><div><div class="alectryon-messages"><blockquote class="alectryon-message"><span class="kd">structure</span> iff : <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span> <span class="bp">→</span> <span class="kt">Prop</span>
fields:
iff.mp : <span class="bp">∀</span> {a b : <span class="kt">Prop</span>}, (a <span class="bp">↔</span> b) <span class="bp">→</span> a <span class="bp">→</span> b
iff.mpr : <span class="bp">∀</span> {a b : <span class="kt">Prop</span>}, (a <span class="bp">↔</span> b) <span class="bp">→</span> b <span class="bp">→</span> a</blockquote></div></div></small></span></pre></div>
<div class="section" id="documenting-proofs">
<h1>Documenting proofs</h1>
<p>Alectryon also captures goals and hypotheses as proofs progress:</p>
<pre class="alectryon-io highlight"><!-- Generator: Alectryon --><span class="alectryon-sentence"><span class="alectryon-input"><span class="kd">example</span> (p q r : <span class="kt">Prop</span>) : p <span class="bp">∧</span> q <span class="bp">↔</span> q <span class="bp">∧</span> p :=</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chk5" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk5">apply iff.intro,</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">p <span class="bp">∧</span> q <span class="bp">→</span> q <span class="bp">∧</span> p</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-lean3-lean-chk6" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br></div><label class="goal-separator" for="literate-lean3-lean-chk6"><hr></label><div class="goal-conclusion">q <span class="bp">∧</span> p <span class="bp">→</span> p <span class="bp">∧</span> q</div></blockquote></div></div></div></small><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chk7" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk7">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">p <span class="bp">∧</span> q <span class="bp">→</span> q <span class="bp">∧</span> p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chk8" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk8" id="literate-lean3-lean-s-intro-h-0">intro H,<span class="alectryon-mref-marker">1</span></label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p <span class="bp">∧</span> q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">q <span class="bp">∧</span> p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input checked="checked" class="alectryon-toggle" id="literate-lean3-lean-chk9" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk9">apply and.intro,</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span id="literate-lean3-lean-s-and-intro-h-h-0"><var>H</var><span class="hyp-type"><b>: </b><span>p <span class="bp">∧</span> q</span></span><span class="alectryon-mref-marker">2</span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">q</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-lean3-lean-chka" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p <span class="bp">∧</span> q</span></span></span><br></div><label class="goal-separator" for="literate-lean3-lean-chka"><hr></label><div class="goal-conclusion">p</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chkb" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chkb">apply (and.elim_right H),</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>p <span class="bp">∧</span> q</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">p</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">apply (and.elim_left H),</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">},</span><span class="alectryon-wsp"> </span></span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chkc" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chkc">{</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">q <span class="bp">∧</span> p <span class="bp">→</span> p <span class="bp">∧</span> q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chkd" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chkd">intro H,</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>q <span class="bp">∧</span> p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">p <span class="bp">∧</span> q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chke" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chke">apply and.intro,</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>q <span class="bp">∧</span> p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">p</div></blockquote><div class="alectryon-extra-goals"><input class="alectryon-extra-goal-toggle" id="literate-lean3-lean-chkf" style="display: none" type="checkbox"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>q <span class="bp">∧</span> p</span></span></span><br></div><label class="goal-separator" for="literate-lean3-lean-chkf"><hr></label><div class="goal-conclusion">q</div></blockquote></div></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><input class="alectryon-toggle" id="literate-lean3-lean-chk10" style="display: none" type="checkbox"><label class="alectryon-input" for="literate-lean3-lean-chk10">apply (and.elim_right H),</label><small class="alectryon-output"><div><div class="alectryon-goals"><blockquote class="alectryon-goal"><div class="goal-hyps"><span><var>p, q, r</var><span class="hyp-type"><b>: </b><span><span class="kt">Prop</span></span></span></span><br><span><var>H</var><span class="hyp-type"><b>: </b><span>q <span class="bp">∧</span> p</span></span></span><br></div><span class="goal-separator"><hr></span><div class="goal-conclusion">q</div></blockquote></div></div></small><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">    </span><span class="alectryon-sentence"><span class="alectryon-input">apply (and.elim_left H),</span><span class="alectryon-wsp">
</span></span><span class="alectryon-wsp">  </span><span class="alectryon-sentence"><span class="alectryon-input">}
<span class="kd">end</span></span></span></pre><p>Most features available for Coq are also available for Lean3; in particular, references (<a class="alectryon-mref reference internal" href="#literate-lean3-lean-s-intro-h-0">1</a>, <a class="alectryon-mref reference internal" href="#literate-lean3-lean-s-and-intro-h-h-0">2</a>), quotes (<samp class="alectryon-inline highlight"><!-- Generator: Alectryon -->p ∧ q</samp>) and assertions should work.</p>
<pre class="alectryon-block highlight"><!-- Generator: Alectryon -->q ∧ p → p ∧ q</pre><p>For now, please refer to the main README and to the Coq examples for more information.</p>
</div>
</div>
</div></body>
</html>
